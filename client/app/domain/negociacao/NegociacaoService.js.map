{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","_url","obtemNegociacoesDaSemana","get","then","dados","negociacoes","map","objeto","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV;AACA,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACA,yBAAKK,IAAL,GAAY,uBAAZ;AACH;;AAEDC,2CAA2B;AACvB,2BAAO,KAAKF,KAAL,CACFG,GADE,CACE,KAAKF,IAAL,GAAY,qBADd,EAEFG,IAFE,CAGCC,SAAS;AACL,8BAAMC,cAAcD,MAAME,GAAN,CAAUC,UAC1B,IAAIX,UAAJ,CAAe,IAAIY,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADgB,CAApB;AAEA;AACA,+BAAON,WAAP;AACH,qBARF,EASCO,OAAO;AACH;AACA,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAZF,CAAP;AAcH;;AAEDC,mDAAmC;AAC/B,2BAAO,KAAKf,KAAL,CACFG,GADE,CACE,KAAKF,IAAL,GAAY,uBADd,EAEFG,IAFE,CAGCC,SAAS;AACL,8BAAMC,cAAcD,MAAME,GAAN,CAAUC,UAC1B,IAAIX,UAAJ,CAAe,IAAIY,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADgB,CAApB;AAEA,+BAAON,WAAP;AACH,qBAPF,EAQCO,OAAO;AACH;AACA,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBAXF,CAAP;AAaH;;AAEDE,oDAAoC;AAChC,2BAAO,KAAKhB,KAAL,CACFG,GADE,CACE,KAAKF,IAAL,GAAY,wBADd,EAEFG,IAFE,CAGCC,SAAS;AACL,8BAAMC,cAAcD,MAAME,GAAN,CAAUC,UAC1B,IAAIX,UAAJ,CAAe,IAAIY,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAClCG,UADJ,EACgBH,OAAOI,KADvB,CADgB,CAApB;AAGA,+BAAON,WAAP;AACH,qBARF,EASCO,OAAO;AACH,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACH,qBAXF,CAAP;AAaH;;AAEDG,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKjB,wBAAL,EADe,EAEf,KAAKa,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAIJZ,IAJI,CAICgB,WAAWA,QACdC,MADc,CACP,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADd,EACsC,EADtC,EAEdE,IAFc,CAET,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAFpB,CAJZ,EAOLC,KAPK,CAOChB,OAAO;AACXiB,gCAAQC,GAAR,CAAYlB,GAAZ;AACA,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAVM,CAAP;AAWH;;AArE0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\n\nexport class NegociacaoService {\n\n    constructor() {\n        // NOVA PROPRIEDADE!\n        this._http = new HttpService();\n        this._url = 'http://localhost:3000';\n    }\n\n    obtemNegociacoesDaSemana() {\n        return this._http\n            .get(this._url + '/negociacoes/semana')\n            .then(\n                dados => {\n                    const negociacoes = dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor));\n                    // ATENÇÃO AQUI! \n                    return negociacoes;\n                },\n                err => {\n                    // ATENÇÃO AQUI!\n                    throw new Error('Não foi possível obter as negociações');\n                }\n            );\n    }\n\n    obtemNegociacoesDaSemanaAnterior() {\n        return this._http\n            .get(this._url + '/negociacoes/anterior')\n            .then(\n                dados => {\n                    const negociacoes = dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor));\n                    return negociacoes;\n                },\n                err => {\n                    //\tATENÇÃO\tAQUI!\n                    throw new Error('Não foi possível obter as negociações da semana anterior');\n                }\n            );\n    }\n\n    obtemNegociacoesDaSemanaRetrasada() {\n        return this._http\n            .get(this._url + '/negociacoes/retrasada')\n            .then(\n                dados => {\n                    const negociacoes = dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.\n                            quantidade, objeto.valor));\n                    return negociacoes;\n                },\n                err => {\n                    throw new Error('Não foi possível obter as negociações da semana retrasada');\n                }\n            );\n    }\n\n    obtemNegociacoesDoPeriodo() {\n        return Promise.all([\n            this.obtemNegociacoesDaSemana(),\n            this.obtemNegociacoesDaSemanaAnterior(),\n            this.obtemNegociacoesDaSemanaRetrasada()\n        ]).then(periodo => periodo\n            .reduce((novoArray, item) => novoArray.concat(item), [])\n            .sort((a, b) => b.data.getTime() - a.data.getTime())\n        ).catch(err => {\n            console.log(err);\n            throw new Error('Não foi possível obter as negociações do período')\n        });\n    }\n\n}"]}